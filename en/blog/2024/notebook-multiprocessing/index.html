<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/09dfadb69bdaa005.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ac9b4cc367c17784.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/72f0b751ba818b6f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-3ec6371319e38377.js"/><script src="/_next/static/chunks/4bd1b696-e193fc35581091f7.js" async=""></script><script src="/_next/static/chunks/684-670f7fde26101c67.js" async=""></script><script src="/_next/static/chunks/main-app-bef5cc271bcac1d2.js" async=""></script><script src="/_next/static/chunks/app/layout-cb5038e2af1ab31b.js" async=""></script><script src="/_next/static/chunks/app/not-found-374964195ecf67e5.js" async=""></script><script src="/_next/static/chunks/72-d3fcf2c32f7e11b9.js" async=""></script><script src="/_next/static/chunks/435-711aececbe1f0279.js" async=""></script><script src="/_next/static/chunks/app/en/blog/%5B%5B...slug%5D%5D/page-796c0eed0cae63f7.js" async=""></script><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><title>Multiprocessing in Jupyter Notebooks | @unjello blog</title><meta property="og:title" content="Multiprocessing in Jupyter Notebooks | @unjello blog"/><meta property="og:url" content="https://andrzej.lichnerowicz.pl/en/blog/2024/notebook-multiprocessing/"/><meta property="og:image" content="https://andrzej.lichnerowicz.pl/images/2024/notebook_multiprocessing/index/96dz0h.jpg"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Multiprocessing in Jupyter Notebooks | @unjello blog"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-10-13T20:01:33+02:00"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Multiprocessing in Jupyter Notebooks | @unjello blog"/><meta name="twitter:image" content="https://andrzej.lichnerowicz.pl/images/2024/notebook_multiprocessing/index/96dz0h.jpg"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="flex justify-center"><div class="ascii-art nfo-pre"><button class="theme-switcher" aria-label="Switch to dark theme">☼</button><div class="header-component">                              _______._ _
                      _ _.___/       |
                         |           |
                         |           |
                                                 ∙
                         .                       :
             ____________¡ &gt;&gt;&gt;  _______   _ __ _ ¡  __    _______
          __|⌐           |  ___|  ⌐____|_ ______ |       |       |
        . |     [        | |                   _ |  :  __l.|  ┌  | .
     ÷¼¼¼ |     |         \|    _____|       _ __|  |_|   |      | ¼¼¼÷
          |_____l  _ l         |     |___|        ________|------!
          ! ___ _         \____| ___ !  _________|.sti      __ _ :
          ∙                          :             &lt; &lt;&lt;&lt;&lt;        ∙
                                     ∙
                         :           |
    - -----andrzej-_ ____\_____|----_|_____________&#x27;-lichnerowicz-------- -
                         :           |
 .     p e r s o n a l ! |    #1     | wEBPAGE                            .
 . _         - --------- |  - -- -   | ------- -                         _  .
-:-\-\-------------------|- -     - -|-----------------------------------\-\-:
 |                      _|___________|_                                      |
 |                       :           :                                       |</div> |//_)-&gt; 2 0 2 4 . 1 0 . 1 3 &lt;--------------------------------------------(_\|
<div class="whitespace-pre font-mono"> |                                                                           |</div><div class="whitespace-pre font-mono"> |                                                                           |</div><div class="whitespace-pre font-mono" style="display:flex"> | <a class="hover:underline inline-block" style="text-decoration:none;color:inherit;width:calc(100% - 6ch)" href="/">&lt;&lt; back                                                                     </a>|</div><div class="whitespace-pre font-mono"> |                                                                           |</div><div style="position:relative;width:fit-content;min-width:76ch;height:72px;transition:height 0.3s cubic-bezier(0.4, 0, 0.2, 1);overflow:hidden;white-space:nowrap"><pre aria-hidden="true" style="margin:0;padding:0;pointer-events:none;user-select:none;overflow-x:visible"><span> |                                                                         |
</span><span> |                                                                         |
</span><span> |                                                                         |
</span></pre><div class="whitespace-pre-wrap font-mono" style="position:absolute;top:0;left:3ch;width:calc(100% - 6ch);overflow:visible;z-index:1"><div style="font-weight:bold;font-size:1.2em;margin-top:1em;margin-bottom:2.5em"># <!-- -->Multiprocessing in Jupyter Notebooks</div><div class="MarkdownHeading_markdown-heading__G6B4T"><span class="MarkdownHeading_markdown-hash__CheR_">##<!-- --> </span><span>TL;DR</span></div>
<p>To run heavy workloads in a Jupyter Notebook, you need to take your function and store it in a temporary Python source file so it&#x27;s importable as a module:</p>
<pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> contextlib</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> inspect</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> importlib</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> pathlib</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="5"><div class="code-ln-n" data-line-number="5"></div></td>
        <td class="code-ln-code" data-line-number="5"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> sys</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="6"><div class="code-ln-n" data-line-number="6"></div></td>
        <td class="code-ln-code" data-line-number="6"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> tempfile</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="7"><div class="code-ln-n" data-line-number="7"></div></td>
        <td class="code-ln-code" data-line-number="7"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="8"><div class="code-ln-n" data-line-number="8"></div></td>
        <td class="code-ln-code" data-line-number="8"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="9"><div class="code-ln-n" data-line-number="9"></div></td>
        <td class="code-ln-code" data-line-number="9"><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">@contextlib.contextmanager</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="10"><div class="code-ln-n" data-line-number="10"></div></td>
        <td class="code-ln-code" data-line-number="10"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> wrap_fn</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(fn):</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="11"><div class="code-ln-n" data-line-number="11"></div></td>
        <td class="code-ln-code" data-line-number="11"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    importlib.invalidate_caches()</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="12"><div class="code-ln-n" data-line-number="12"></div></td>
        <td class="code-ln-code" data-line-number="12"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    source </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> inspect.getsource(fn)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="13"><div class="code-ln-n" data-line-number="13"></div></td>
        <td class="code-ln-code" data-line-number="13"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    with</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> tempfile.NamedTemporaryFile(</span><span style="color:#E36209;--shiki-dark:#FFAB70">suffix</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">".py"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">mode</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"w"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">encoding</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"utf-8"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">as</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> f:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="14"><div class="code-ln-n" data-line-number="14"></div></td>
        <td class="code-ln-code" data-line-number="14"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        f.write(source)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="15"><div class="code-ln-n" data-line-number="15"></div></td>
        <td class="code-ln-code" data-line-number="15"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        f.flush()</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="16"><div class="code-ln-n" data-line-number="16"></div></td>
        <td class="code-ln-code" data-line-number="16"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        path </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> pathlib.Path(f.name)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="17"><div class="code-ln-n" data-line-number="17"></div></td>
        <td class="code-ln-code" data-line-number="17"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        directory </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> str</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(path.parent)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="18"><div class="code-ln-n" data-line-number="18"></div></td>
        <td class="code-ln-code" data-line-number="18"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        sys.path.append(directory)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="19"><div class="code-ln-n" data-line-number="19"></div></td>
        <td class="code-ln-code" data-line-number="19"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        module </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> importlib.import_module(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">str</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(path.stem))</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="20"><div class="code-ln-n" data-line-number="20"></div></td>
        <td class="code-ln-code" data-line-number="20"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        yield</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> getattr</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(module, func.</span><span style="color:#005CC5;--shiki-dark:#79B8FF">__name__</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="21"><div class="code-ln-n" data-line-number="21"></div></td>
        <td class="code-ln-code" data-line-number="21"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        sys.path.remove(directory)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="22"><div class="code-ln-n" data-line-number="22"></div></td>
        <td class="code-ln-code" data-line-number="22"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="23"><div class="code-ln-n" data-line-number="23"></div></td>
        <td class="code-ln-code" data-line-number="23"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="24"><div class="code-ln-n" data-line-number="24"></div></td>
        <td class="code-ln-code" data-line-number="24"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> square</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(x):</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="25"><div class="code-ln-n" data-line-number="25"></div></td>
        <td class="code-ln-code" data-line-number="25"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> x</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#24292E;--shiki-dark:#E1E4E8">x</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="26"><div class="code-ln-n" data-line-number="26"></div></td>
        <td class="code-ln-code" data-line-number="26"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="27"><div class="code-ln-n" data-line-number="27"></div></td>
        <td class="code-ln-code" data-line-number="27"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="28"><div class="code-ln-n" data-line-number="28"></div></td>
        <td class="code-ln-code" data-line-number="28"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">context </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> multiprocessing.get_context(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"spawn"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="29"><div class="code-ln-n" data-line-number="29"></div></td>
        <td class="code-ln-code" data-line-number="29"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">with</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> ProcessPoolExecutor(</span><span style="color:#E36209;--shiki-dark:#FFAB70">max_workers</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">12</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">mp_context</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">context) </span><span style="color:#D73A49;--shiki-dark:#F97583">as</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> executor, wrap_fn(square) </span><span style="color:#D73A49;--shiki-dark:#F97583">as</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> fn:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="30"><div class="code-ln-n" data-line-number="30"></div></td>
        <td class="code-ln-code" data-line-number="30"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    for</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> sq </span><span style="color:#D73A49;--shiki-dark:#F97583">in</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> executor.map(fn, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">range</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">10</span><span style="color:#24292E;--shiki-dark:#E1E4E8">))</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="31"><div class="code-ln-n" data-line-number="31"></div></td>
        <td class="code-ln-code" data-line-number="31"><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">        print</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">f</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#005CC5;--shiki-dark:#79B8FF">{</span><span style="color:#24292E;--shiki-dark:#E1E4E8">sq</span><span style="color:#005CC5;--shiki-dark:#79B8FF">}</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#E36209;--shiki-dark:#FFAB70">end</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#032F62;--shiki-dark:#9ECBFF">""</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="32"><div class="code-ln-n" data-line-number="32"></div></td>
        <td class="code-ln-code" data-line-number="32"><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">print</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#032F62;--shiki-dark:#9ECBFF">""</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></td>
      </tr></tbody></table></code></pre>
<p>Here&#x27;s what&#x27;s happening in this code:</p>
<ul>
<li>The wrap_fn context manager takes your function fn.</li>
<li>It gets the source code of fn and writes it to a temporary Python file.</li>
<li>It then imports this temporary file as a module, making your function accessible via a module name.</li>
<li>Inside the context, fn is now the function from the temporary module and can be pickled and sent to child processes.</li>
<li>We use <!-- --> to distribute the workload across multiple processes.</li>
</ul>
<p>By doing this, we avoid the issue of the function not being picklable due to being defined in the interactive namespace.</p>
<div class="MarkdownHeading_markdown-heading__G6B4T"><span class="MarkdownHeading_markdown-hash__CheR_">##<!-- --> </span><span>But if you ask me on a deeper level...</span></div>
<p>Jupyter Notebooks offer a great way to work with many things, combining the ability to play around with data like in a REPL with the maintainability of a script. Once in a while, though, you face a problem that requires some serious raw power. For me, such a moment occurred when I was working on a data matching problem in a dataset containing almost <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>900</mn><mo separator="true">,</mo><mn>000</mn></mrow><annotation encoding="application/x-tex">900,000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="mord">900</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">000</span></span></span></span> elements. Performing naive <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>×</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \times B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span> pair matching with similarity tests over a couple of parameters that take 1 second would have me processing the set for… about 25,684 years. A gentle reminder that:</p>
<div class="Figure_figureWrapper__na8U3"><figure class="Figure_figure__Do4qR"><img alt="Big Oh N squared is bad, and you should feel bad -- a Zoidberg meme, very mature..." loading="lazy" width="800" height="500" decoding="async" data-nimg="1" style="color:transparent" src="/images/2024/notebook_multiprocessing/96dz0h.jpg"/><figcaption class="Figure_caption__N51Ul"><cite><p>Original idea captioned in <a href="https://imgflip.com/memegenerator/">memegenerator</a></p></cite><p>Very mature meme</p></figcaption></figure></div>
<div class="MarkdownHeading_markdown-heading__G6B4T"><span class="MarkdownHeading_markdown-hash__CheR_">##<!-- --> </span><span>Multiprocessing</span></div>
<p>So what do you do when you have so much crunching to do that you want to utilize all CPU cores? That’s when <a href="https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor"></a> steps in to save the day. For those unfamiliar, <!-- --> is like that friend who helps you move heavy furniture; it lives in the <a href="https://docs.python.org/3/library/concurrent.futures.html"></a> package of the standard Python library and, much like <a href="https://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor"></a>, lets you distribute workload across a pool of workers. The difference is, these workers are separate processes, not threads.</p>
<p>With both <em>threads</em> and <em>processes</em>, the API looks innocently simple: you just pass the function that will be called by each worker with a piece of data:</p>
<pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> concurrent.futures</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">with</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> concurrent.futures.ThreadsPoolExecutor(</span><span style="color:#E36209;--shiki-dark:#FFAB70">max_workers</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">20</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">as</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> executor:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    squares </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> executor.map(</span><span style="color:#D73A49;--shiki-dark:#F97583">lambda</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> x: x</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#24292E;--shiki-dark:#E1E4E8">x, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">range</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">100000</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)):</span></span></td>
      </tr></tbody></table></code></pre>
<p>For <em>threads</em>, that&#x27;s pretty much it—you can pat yourself on the back and watch your CPU stay underutilized. But <a href="https://stackoverflow.com/questions/4496680/python-threads-all-executing-on-a-single-core">threads aren&#x27;t going to use all your cores</a> due to the infamous Global Interpreter Lock (GIL). So what if we swap <!-- --> for <!-- --> to really get the party started? We get an exception immediately.</p>
<pre class="language-plaintext pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span>_pickle.PicklingError: Can't pickle &#x3C;function &#x3C;lambda> at 0x10332e160>: </span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"><span>  attribute lookup &#x3C;lambda> on __main__ failed</span></span></td>
      </tr></tbody></table></code></pre>
<p>What happened? Well, the first rule of multiprocessing is that it uses <a href="https:z//docs.python.org/3/library/pickle.html"></a> to serialize a function and data between the parent process and child processes. And pickle&#x27;s <a href="https://docs.python.org/3/library/pickle.html">documentation</a> says:</p>
<blockquote>
<p>Note that functions (built-in and user-defined) are pickled by <strong>fully qualified name</strong>, not by value.
This means that only the function name is pickled, along with the name of the containing module and classes.
Neither the function&#x27;s code, nor any of its function attributes are pickled.</p>
</blockquote>
<p>Since all lambdas share the same name -- <!-- --> -- that explains why we need to define a proper method:</p>
<pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">import</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> concurrent.futures</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> square</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(x):</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> x</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#24292E;--shiki-dark:#E1E4E8">x</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="5"><div class="code-ln-n" data-line-number="5"></div></td>
        <td class="code-ln-code" data-line-number="5"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="6"><div class="code-ln-n" data-line-number="6"></div></td>
        <td class="code-ln-code" data-line-number="6"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">with</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> concurrent.futures.ThreadsPoolExecutor(</span><span style="color:#E36209;--shiki-dark:#FFAB70">max_workers</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">20</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">as</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> executor:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="7"><div class="code-ln-n" data-line-number="7"></div></td>
        <td class="code-ln-code" data-line-number="7"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    squares </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> executor.map(square, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">range</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">100000</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)):</span></span></td>
      </tr></tbody></table></code></pre>
<p>Now it works, but that error above has one little, less obvious consequence. If we only send a <em>fully qualified name</em> over to another process, then how does the method get called?</p>
<p>When the <!-- --> module starts a new child process, it doesn&#x27;t have access to your current interactive namespace. It&#x27;s like sending someone to fetch an item from your house without giving them the address—they need to know where to look.</p>
<p>Under the hood, when multiprocessing starts a new child process, it uses <!-- --> on Windows and macOS. On POSIX systems, it&#x27;s still using fork, although since Python 3.12 it&#x27;ll throw a <!-- -->. Fork is a bit problematic from a safety point of view, as the child process inherits everything from the parent process. Spawn, on the other hand, starts a completely fresh Python interpreter process.</p>
<p>This means that any variables or functions you&#x27;ve defined interactively in your Jupyter Notebook aren&#x27;t automatically available in the child processes. They&#x27;re starting from scratch, and unless your function is defined in a module they can import, they&#x27;re left in the dark.</p>
<p>Here&#x27;s a rough diagram, courtesy of the Python <a href="https://github.com/python/cpython/blob/main/Lib/concurrent/futures/process.py">docs</a>, of how the flow looks when you submit work to the process pool:</p>
<div class="goat-diagram-wrapper"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="313" width="656" font-family="Menlo,Lucida Console,monospace" viewBox="0 0 656 313" preserveAspectRatio="xMidYMid meet">
<style type="text/css">
svg {
   color: #000000;
}
@media (prefers-color-scheme: dark) {
   svg {
      color-scheme: dark; /* ask the browser for a dark background */
      color: #FFFFFF;
   }
}
</style>
<g transform="translate(8,16)">
<path d="M 0,16 L 88,16" fill="none" stroke="currentColor"></path>
<path d="M 136,16 L 224,16" fill="none" stroke="currentColor"></path>
<path d="M 288,16 L 360,16" fill="none" stroke="currentColor"></path>
<path d="M 408,16 L 504,16" fill="none" stroke="currentColor"></path>
<path d="M 552,16 L 632,16" fill="none" stroke="currentColor"></path>
<path d="M 96,32 L 128,32" fill="none" stroke="currentColor"></path>
<path d="M 136,64 L 224,64" fill="none" stroke="currentColor"></path>
<path d="M 408,64 L 504,64" fill="none" stroke="currentColor"></path>
<path d="M 552,64 L 632,64" fill="none" stroke="currentColor"></path>
<path d="M 232,96 L 280,96" fill="none" stroke="currentColor"></path>
<path d="M 368,96 L 400,96" fill="none" stroke="currentColor"></path>
<path d="M 512,96 L 544,96" fill="none" stroke="currentColor"></path>
<path d="M 408,128 L 504,128" fill="none" stroke="currentColor"></path>
<path d="M 136,144 L 224,144" fill="none" stroke="currentColor"></path>
<path d="M 136,176 L 240,176" fill="none" stroke="currentColor"></path>
<path d="M 408,176 L 504,176" fill="none" stroke="currentColor"></path>
<path d="M 96,192 L 128,192" fill="none" stroke="currentColor"></path>
<path d="M 248,192 L 280,192" fill="none" stroke="currentColor"></path>
<path d="M 368,192 L 400,192" fill="none" stroke="currentColor"></path>
<path d="M 512,192 L 544,192" fill="none" stroke="currentColor"></path>
<path d="M 136,208 L 240,208" fill="none" stroke="currentColor"></path>
<path d="M 408,224 L 504,224" fill="none" stroke="currentColor"></path>
<path d="M 0,288 L 88,288" fill="none" stroke="currentColor"></path>
<path d="M 136,288 L 240,288" fill="none" stroke="currentColor"></path>
<path d="M 288,288 L 360,288" fill="none" stroke="currentColor"></path>
<path d="M 408,288 L 504,288" fill="none" stroke="currentColor"></path>
<path d="M 552,288 L 632,288" fill="none" stroke="currentColor"></path>
<path d="M 0,0 L 0,16" fill="none" stroke="currentColor"></path>
<path d="M 0,16 L 0,288" fill="none" stroke="currentColor"></path>
<path d="M 88,16 L 88,288" fill="none" stroke="currentColor"></path>
<path d="M 136,16 L 136,64" fill="none" stroke="currentColor"></path>
<path d="M 136,64 L 136,144" fill="none" stroke="currentColor"></path>
<path d="M 136,176 L 136,208" fill="none" stroke="currentColor"></path>
<path d="M 136,208 L 136,288" fill="none" stroke="currentColor"></path>
<path d="M 224,16 L 224,64" fill="none" stroke="currentColor"></path>
<path d="M 224,64 L 224,144" fill="none" stroke="currentColor"></path>
<path d="M 240,176 L 240,208" fill="none" stroke="currentColor"></path>
<path d="M 240,208 L 240,288" fill="none" stroke="currentColor"></path>
<path d="M 288,16 L 288,288" fill="none" stroke="currentColor"></path>
<path d="M 360,16 L 360,288" fill="none" stroke="currentColor"></path>
<path d="M 408,16 L 408,64" fill="none" stroke="currentColor"></path>
<path d="M 408,64 L 408,128" fill="none" stroke="currentColor"></path>
<path d="M 408,176 L 408,224" fill="none" stroke="currentColor"></path>
<path d="M 408,224 L 408,288" fill="none" stroke="currentColor"></path>
<path d="M 504,16 L 504,64" fill="none" stroke="currentColor"></path>
<path d="M 504,64 L 504,128" fill="none" stroke="currentColor"></path>
<path d="M 504,176 L 504,224" fill="none" stroke="currentColor"></path>
<path d="M 504,224 L 504,288" fill="none" stroke="currentColor"></path>
<path d="M 552,16 L 552,64" fill="none" stroke="currentColor"></path>
<path d="M 552,64 L 552,288" fill="none" stroke="currentColor"></path>
<path d="M 632,0 L 632,16" fill="none" stroke="currentColor"></path>
<path d="M 632,16 L 632,64" fill="none" stroke="currentColor"></path>
<path d="M 632,64 L 632,288" fill="none" stroke="currentColor"></path>
<polygon points="104.000000,192.000000 92.000000,186.399994 92.000000,197.600006" fill="currentColor" transform="rotate(180.000000, 96.000000, 192.000000)"></polygon>
<polygon points="136.000000,32.000000 124.000000,26.400000 124.000000,37.599998" fill="currentColor" transform="rotate(0.000000, 128.000000, 32.000000)"></polygon>
<polygon points="136.000000,192.000000 124.000000,186.399994 124.000000,197.600006" fill="currentColor" transform="rotate(0.000000, 128.000000, 192.000000)"></polygon>
<polygon points="256.000000,192.000000 244.000000,186.399994 244.000000,197.600006" fill="currentColor" transform="rotate(180.000000, 248.000000, 192.000000)"></polygon>
<polygon points="288.000000,96.000000 276.000000,90.400002 276.000000,101.599998" fill="currentColor" transform="rotate(0.000000, 280.000000, 96.000000)"></polygon>
<polygon points="288.000000,192.000000 276.000000,186.399994 276.000000,197.600006" fill="currentColor" transform="rotate(0.000000, 280.000000, 192.000000)"></polygon>
<polygon points="376.000000,192.000000 364.000000,186.399994 364.000000,197.600006" fill="currentColor" transform="rotate(180.000000, 368.000000, 192.000000)"></polygon>
<polygon points="408.000000,96.000000 396.000000,90.400002 396.000000,101.599998" fill="currentColor" transform="rotate(0.000000, 400.000000, 96.000000)"></polygon>
<polygon points="520.000000,192.000000 508.000000,186.399994 508.000000,197.600006" fill="currentColor" transform="rotate(180.000000, 512.000000, 192.000000)"></polygon>
<polygon points="552.000000,96.000000 540.000000,90.400002 540.000000,101.599998" fill="currentColor" transform="rotate(0.000000, 544.000000, 96.000000)"></polygon>
<style>
  text {
       text-anchor: middle;
       font-family: "Menlo","Lucida Console","monospace";
       fill: currentColor;
       font-size: 1em;
  }
</style>
<text x="8" y="4">=</text>
<text x="16" y="4">=</text>
<text x="24" y="4">=</text>
<text x="32" y="4">=</text>
<text x="40" y="4">=</text>
<text x="48" y="4">=</text>
<text x="56" y="4">=</text>
<text x="64" y="4">=</text>
<text x="72" y="4">=</text>
<text x="80" y="4">=</text>
<text x="88" y="4">=</text>
<text x="96" y="4">=</text>
<text x="104" y="4">=</text>
<text x="112" y="4">=</text>
<text x="120" y="4">=</text>
<text x="128" y="4">=</text>
<text x="136" y="4">=</text>
<text x="144" y="4">=</text>
<text x="152" y="4">=</text>
<text x="160" y="4">=</text>
<text x="168" y="4">=</text>
<text x="176" y="4">=</text>
<text x="184" y="4">=</text>
<text x="200" y="4">I</text>
<text x="208" y="4">n</text>
<text x="216" y="4">-</text>
<text x="224" y="4">p</text>
<text x="232" y="4">r</text>
<text x="240" y="4">o</text>
<text x="248" y="4">c</text>
<text x="256" y="4">e</text>
<text x="264" y="4">s</text>
<text x="272" y="4">s</text>
<text x="288" y="4">=</text>
<text x="296" y="4">=</text>
<text x="304" y="4">=</text>
<text x="312" y="4">=</text>
<text x="320" y="4">=</text>
<text x="328" y="4">=</text>
<text x="336" y="4">=</text>
<text x="344" y="4">=</text>
<text x="352" y="4">=</text>
<text x="360" y="4">=</text>
<text x="368" y="4">=</text>
<text x="376" y="4">=</text>
<text x="384" y="4">=</text>
<text x="392" y="4">=</text>
<text x="400" y="4">=</text>
<text x="408" y="4">=</text>
<text x="416" y="4">=</text>
<text x="424" y="4">=</text>
<text x="432" y="4">=</text>
<text x="440" y="4">=</text>
<text x="448" y="4">=</text>
<text x="456" y="4">=</text>
<text x="464" y="4">|</text>
<text x="472" y="4">=</text>
<text x="480" y="4">=</text>
<text x="496" y="4">O</text>
<text x="504" y="4">u</text>
<text x="512" y="4">t</text>
<text x="520" y="4">-</text>
<text x="528" y="4">o</text>
<text x="536" y="4">f</text>
<text x="544" y="4">-</text>
<text x="552" y="4">p</text>
<text x="560" y="4">r</text>
<text x="568" y="4">o</text>
<text x="576" y="4">c</text>
<text x="584" y="4">e</text>
<text x="592" y="4">s</text>
<text x="600" y="4">s</text>
<text x="616" y="4">=</text>
<text x="624" y="4">=</text>
<text x="152" y="36">W</text>
<text x="160" y="36">o</text>
<text x="168" y="36">r</text>
<text x="176" y="36">k</text>
<text x="192" y="36">I</text>
<text x="200" y="36">d</text>
<text x="208" y="36">s</text>
<text x="440" y="36">C</text>
<text x="448" y="36">a</text>
<text x="456" y="36">l</text>
<text x="464" y="36">l</text>
<text x="568" y="36">P</text>
<text x="576" y="36">r</text>
<text x="584" y="36">o</text>
<text x="592" y="36">c</text>
<text x="600" y="36">e</text>
<text x="608" y="36">s</text>
<text x="616" y="36">s</text>
<text x="440" y="52">Q</text>
<text x="448" y="52">u</text>
<text x="456" y="52">e</text>
<text x="464" y="52">u</text>
<text x="472" y="52">e</text>
<text x="576" y="52">P</text>
<text x="584" y="52">o</text>
<text x="592" y="52">o</text>
<text x="600" y="52">l</text>
<text x="152" y="84">.</text>
<text x="160" y="84">.</text>
<text x="168" y="84">.</text>
<text x="424" y="84">.</text>
<text x="432" y="84">.</text>
<text x="440" y="84">.</text>
<text x="152" y="100">6</text>
<text x="424" y="100">5</text>
<text x="432" y="100">,</text>
<text x="448" y="100">c</text>
<text x="456" y="100">a</text>
<text x="464" y="100">l</text>
<text x="472" y="100">l</text>
<text x="480" y="100">(</text>
<text x="488" y="100">)</text>
<text x="152" y="116">7</text>
<text x="424" y="116">.</text>
<text x="432" y="116">.</text>
<text x="440" y="116">.</text>
<text x="16" y="132">P</text>
<text x="24" y="132">r</text>
<text x="32" y="132">o</text>
<text x="40" y="132">c</text>
<text x="48" y="132">e</text>
<text x="56" y="132">s</text>
<text x="64" y="132">s</text>
<text x="152" y="132">.</text>
<text x="160" y="132">.</text>
<text x="168" y="132">.</text>
<text x="304" y="132">L</text>
<text x="312" y="132">o</text>
<text x="320" y="132">c</text>
<text x="328" y="132">a</text>
<text x="336" y="132">l</text>
<text x="568" y="132">P</text>
<text x="576" y="132">r</text>
<text x="584" y="132">o</text>
<text x="592" y="132">c</text>
<text x="600" y="132">e</text>
<text x="608" y="132">s</text>
<text x="616" y="132">s</text>
<text x="24" y="148">P</text>
<text x="32" y="148">o</text>
<text x="40" y="148">o</text>
<text x="48" y="148">l</text>
<text x="304" y="148">W</text>
<text x="312" y="148">o</text>
<text x="320" y="148">r</text>
<text x="328" y="148">k</text>
<text x="336" y="148">e</text>
<text x="344" y="148">r</text>
<text x="576" y="148">#</text>
<text x="584" y="148">1</text>
<text x="592" y="148">.</text>
<text x="600" y="148">.</text>
<text x="608" y="148">n</text>
<text x="16" y="164">E</text>
<text x="24" y="164">x</text>
<text x="32" y="164">e</text>
<text x="40" y="164">c</text>
<text x="48" y="164">u</text>
<text x="56" y="164">t</text>
<text x="64" y="164">o</text>
<text x="72" y="164">r</text>
<text x="304" y="164">T</text>
<text x="312" y="164">h</text>
<text x="320" y="164">r</text>
<text x="328" y="164">e</text>
<text x="336" y="164">a</text>
<text x="344" y="164">d</text>
<text x="152" y="196">W</text>
<text x="160" y="196">o</text>
<text x="168" y="196">r</text>
<text x="176" y="196">k</text>
<text x="192" y="196">I</text>
<text x="200" y="196">t</text>
<text x="208" y="196">e</text>
<text x="216" y="196">m</text>
<text x="224" y="196">s</text>
<text x="432" y="196">R</text>
<text x="440" y="196">e</text>
<text x="448" y="196">s</text>
<text x="456" y="196">u</text>
<text x="464" y="196">l</text>
<text x="472" y="196">t</text>
<text x="432" y="212">Q</text>
<text x="440" y="212">u</text>
<text x="448" y="212">e</text>
<text x="456" y="212">u</text>
<text x="464" y="212">e</text>
<text x="152" y="244">6</text>
<text x="160" y="244">:</text>
<text x="176" y="244">c</text>
<text x="184" y="244">a</text>
<text x="192" y="244">l</text>
<text x="200" y="244">l</text>
<text x="208" y="244">(</text>
<text x="216" y="244">)</text>
<text x="424" y="244">.</text>
<text x="432" y="244">.</text>
<text x="440" y="244">.</text>
<text x="176" y="260">f</text>
<text x="184" y="260">u</text>
<text x="192" y="260">t</text>
<text x="200" y="260">u</text>
<text x="208" y="260">r</text>
<text x="216" y="260">e</text>
<text x="424" y="260">4</text>
<text x="432" y="260">,</text>
<text x="448" y="260">r</text>
<text x="456" y="260">e</text>
<text x="464" y="260">s</text>
<text x="472" y="260">u</text>
<text x="480" y="260">l</text>
<text x="488" y="260">t</text>
<text x="152" y="276">.</text>
<text x="160" y="276">.</text>
<text x="168" y="276">.</text>
<text x="424" y="276">3</text>
<text x="432" y="276">,</text>
<text x="448" y="276">e</text>
<text x="456" y="276">x</text>
<text x="464" y="276">c</text>
<text x="472" y="276">e</text>
<text x="480" y="276">p</text>
<text x="488" y="276">t</text>
</g>
</svg>
</div>
<p>When you call a <!-- -->, it internally calls <a href="https://github.com/python/cpython/blob/main/Lib/concurrent/futures/process.py#L791">submit</a>, which converts your function, its parameters, and the data into a structure called <!-- --> and adds it to a <!-- -->. In a run-loop, it then pops those work items, and if they&#x27;re not canceled, it repackages them into a structure <!-- --> and puts it on a <!-- -->. The <a href="https://github.com/python/cpython/blob/main/Lib/multiprocessing/queues.py#L262"></a> handles <!-- --> serialization before writing the data. It&#x27;s up to pickle to get the <em>fully qualified name</em> of the function being serialized, and while doing that (and also when deserializing), pickle actually tries to <a href="https://github.com/python/cpython/blob/3.13/Lib/pickle.py#L1082">import the module</a> a function is part of:</p>
<div class="code-filename"><span>Lib/pickle.py</span></div><pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> name </span><span style="color:#D73A49;--shiki-dark:#F97583">is</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    name </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> getattr</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(obj, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">'__qualname__'</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">None</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> name </span><span style="color:#D73A49;--shiki-dark:#F97583">is</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    name </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> obj.</span><span style="color:#005CC5;--shiki-dark:#79B8FF">__name__</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="5"><div class="code-ln-n" data-line-number="5"></div></td>
        <td class="code-ln-code" data-line-number="5"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="6"><div class="code-ln-n" data-line-number="6"></div></td>
        <td class="code-ln-code" data-line-number="6"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">module_name </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> whichmodule(obj, name)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="7"><div class="code-ln-n" data-line-number="7"></div></td>
        <td class="code-ln-code" data-line-number="7"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">try</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="8"><div class="code-ln-n" data-line-number="8"></div></td>
        <td class="code-ln-code" data-line-number="8"><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">    __import__</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(module_name, </span><span style="color:#E36209;--shiki-dark:#FFAB70">level</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="9"><div class="code-ln-n" data-line-number="9"></div></td>
        <td class="code-ln-code" data-line-number="9"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    module </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> sys.modules[module_name]</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="10"><div class="code-ln-n" data-line-number="10"></div></td>
        <td class="code-ln-code" data-line-number="10"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    obj2, parent </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> _getattribute(module, name)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="11"><div class="code-ln-n" data-line-number="11"></div></td>
        <td class="code-ln-code" data-line-number="11"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">except</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="color:#005CC5;--shiki-dark:#79B8FF">ImportError</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">KeyError</span><span style="color:#24292E;--shiki-dark:#E1E4E8">, </span><span style="color:#005CC5;--shiki-dark:#79B8FF">AttributeError</span><span style="color:#24292E;--shiki-dark:#E1E4E8">):</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="12"><div class="code-ln-n" data-line-number="12"></div></td>
        <td class="code-ln-code" data-line-number="12"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    raise</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> PicklingError(</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="13"><div class="code-ln-n" data-line-number="13"></div></td>
        <td class="code-ln-code" data-line-number="13"><span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">        "Can't pickle </span><span style="color:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="color:#032F62;--shiki-dark:#9ECBFF">: it's not found as </span><span style="color:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="color:#032F62;--shiki-dark:#9ECBFF">.</span><span style="color:#005CC5;--shiki-dark:#79B8FF">%s</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"</span><span style="color:#D73A49;--shiki-dark:#F97583"> %</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="14"><div class="code-ln-n" data-line-number="14"></div></td>
        <td class="code-ln-code" data-line-number="14"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        (obj, module_name, name)) </span><span style="color:#D73A49;--shiki-dark:#F97583">from</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> None</span></span></td>
      </tr></tbody></table></code></pre>
<p>That brings us to a very important requirement which is:</p>
<div class="admonition admonition-important"><div class="admonition-title"><span class="admonition-icon">ℹ️</span><span>IMPORTANT</span></div><div class="admonition-content"><p>A function that we pass to executor must be visible via </p></div></div>
<p>When you submit a function to <!-- -->, the function and its arguments are pickled to be sent to the worker process. The pickling process relies on the function being defined at the module level with a name accessible via importing.</p>
<div class="MarkdownHeading_markdown-heading__G6B4T"><span class="MarkdownHeading_markdown-hash__CheR_">##<!-- --> </span><span>Enter Jupyter Notebook</span></div>
<p>The problem is, Jupyter Notebooks, aside from being a JSON document, execute code dynamically. Let&#x27;s see how it works:</p>
<div class="goat-diagram-wrapper"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="201" width="640" font-family="Menlo,Lucida Console,monospace" viewBox="0 0 640 201" preserveAspectRatio="xMidYMid meet">
<style type="text/css">
svg {
   color: #000000;
}
@media (prefers-color-scheme: dark) {
   svg {
      color-scheme: dark; /* ask the browser for a dark background */
      color: #FFFFFF;
   }
}
</style>
<g transform="translate(8,16)">
<path d="M 0,16 L 88,16" fill="none" stroke="currentColor"></path>
<path d="M 152,16 L 280,16" fill="none" stroke="currentColor"></path>
<path d="M 344,16 L 448,16" fill="none" stroke="currentColor"></path>
<path d="M 504,16 L 616,16" fill="none" stroke="currentColor"></path>
<path d="M 152,48 L 280,48" fill="none" stroke="currentColor"></path>
<path d="M 96,64 L 144,64" fill="none" stroke="currentColor"></path>
<path d="M 344,64 L 448,64" fill="none" stroke="currentColor"></path>
<path d="M 504,64 L 616,64" fill="none" stroke="currentColor"></path>
<path d="M 288,80 L 336,80" fill="none" stroke="currentColor"></path>
<path d="M 456,80 L 496,80" fill="none" stroke="currentColor"></path>
<path d="M 152,112 L 280,112" fill="none" stroke="currentColor"></path>
<path d="M 96,144 L 144,144" fill="none" stroke="currentColor"></path>
<path d="M 288,144 L 336,144" fill="none" stroke="currentColor"></path>
<path d="M 456,144 L 496,144" fill="none" stroke="currentColor"></path>
<path d="M 0,176 L 88,176" fill="none" stroke="currentColor"></path>
<path d="M 152,176 L 280,176" fill="none" stroke="currentColor"></path>
<path d="M 344,176 L 448,176" fill="none" stroke="currentColor"></path>
<path d="M 504,176 L 616,176" fill="none" stroke="currentColor"></path>
<path d="M 0,0 L 0,16" fill="none" stroke="currentColor"></path>
<path d="M 0,16 L 0,176" fill="none" stroke="currentColor"></path>
<path d="M 88,16 L 88,176" fill="none" stroke="currentColor"></path>
<path d="M 152,16 L 152,48" fill="none" stroke="currentColor"></path>
<path d="M 152,48 L 152,112" fill="none" stroke="currentColor"></path>
<path d="M 152,112 L 152,176" fill="none" stroke="currentColor"></path>
<path d="M 280,16 L 280,48" fill="none" stroke="currentColor"></path>
<path d="M 280,48 L 280,112" fill="none" stroke="currentColor"></path>
<path d="M 280,112 L 280,176" fill="none" stroke="currentColor"></path>
<path d="M 344,16 L 344,64" fill="none" stroke="currentColor"></path>
<path d="M 344,64 L 344,176" fill="none" stroke="currentColor"></path>
<path d="M 448,16 L 448,64" fill="none" stroke="currentColor"></path>
<path d="M 448,64 L 448,176" fill="none" stroke="currentColor"></path>
<path d="M 504,0 L 504,16" fill="none" stroke="currentColor"></path>
<path d="M 504,16 L 504,64" fill="none" stroke="currentColor"></path>
<path d="M 504,64 L 504,176" fill="none" stroke="currentColor"></path>
<path d="M 616,0 L 616,16" fill="none" stroke="currentColor"></path>
<path d="M 616,16 L 616,64" fill="none" stroke="currentColor"></path>
<path d="M 616,64 L 616,176" fill="none" stroke="currentColor"></path>
<polygon points="104.000000,144.000000 92.000000,138.399994 92.000000,149.600006" fill="currentColor" transform="rotate(180.000000, 96.000000, 144.000000)"></polygon>
<polygon points="152.000000,64.000000 140.000000,58.400002 140.000000,69.599998" fill="currentColor" transform="rotate(0.000000, 144.000000, 64.000000)"></polygon>
<polygon points="296.000000,144.000000 284.000000,138.399994 284.000000,149.600006" fill="currentColor" transform="rotate(180.000000, 288.000000, 144.000000)"></polygon>
<polygon points="344.000000,80.000000 332.000000,74.400002 332.000000,85.599998" fill="currentColor" transform="rotate(0.000000, 336.000000, 80.000000)"></polygon>
<polygon points="464.000000,144.000000 452.000000,138.399994 452.000000,149.600006" fill="currentColor" transform="rotate(180.000000, 456.000000, 144.000000)"></polygon>
<polygon points="504.000000,80.000000 492.000000,74.400002 492.000000,85.599998" fill="currentColor" transform="rotate(0.000000, 496.000000, 80.000000)"></polygon>
<style>
  text {
       text-anchor: middle;
       font-family: "Menlo","Lucida Console","monospace";
       fill: currentColor;
       font-size: 1em;
  }
</style>
<text x="8" y="4">=</text>
<text x="16" y="4">=</text>
<text x="24" y="4">=</text>
<text x="32" y="4">=</text>
<text x="40" y="4">=</text>
<text x="48" y="4">=</text>
<text x="56" y="4">=</text>
<text x="64" y="4">=</text>
<text x="72" y="4">=</text>
<text x="80" y="4">=</text>
<text x="88" y="4">=</text>
<text x="96" y="4">J</text>
<text x="104" y="4">u</text>
<text x="112" y="4">p</text>
<text x="120" y="4">y</text>
<text x="128" y="4">t</text>
<text x="136" y="4">e</text>
<text x="144" y="4">r</text>
<text x="152" y="4">=</text>
<text x="160" y="4">=</text>
<text x="168" y="4">=</text>
<text x="176" y="4">=</text>
<text x="184" y="4">=</text>
<text x="192" y="4">=</text>
<text x="200" y="4">=</text>
<text x="208" y="4">|</text>
<text x="216" y="4">=</text>
<text x="224" y="4">=</text>
<text x="232" y="4">=</text>
<text x="240" y="4">=</text>
<text x="248" y="4">=</text>
<text x="256" y="4">=</text>
<text x="264" y="4">=</text>
<text x="272" y="4">=</text>
<text x="288" y="4">K</text>
<text x="296" y="4">e</text>
<text x="304" y="4">r</text>
<text x="312" y="4">n</text>
<text x="320" y="4">e</text>
<text x="328" y="4">l</text>
<text x="344" y="4">=</text>
<text x="352" y="4">=</text>
<text x="360" y="4">=</text>
<text x="368" y="4">=</text>
<text x="376" y="4">=</text>
<text x="384" y="4">=</text>
<text x="392" y="4">=</text>
<text x="400" y="4">=</text>
<text x="408" y="4">=</text>
<text x="416" y="4">=</text>
<text x="424" y="4">=</text>
<text x="432" y="4">=</text>
<text x="440" y="4">=</text>
<text x="448" y="4">=</text>
<text x="456" y="4">=</text>
<text x="464" y="4">=</text>
<text x="472" y="4">=</text>
<text x="480" y="4">=</text>
<text x="488" y="4">=</text>
<text x="496" y="4">=</text>
<text x="512" y="4">=</text>
<text x="520" y="4">=</text>
<text x="536" y="4">I</text>
<text x="544" y="4">P</text>
<text x="552" y="4">y</text>
<text x="560" y="4">t</text>
<text x="568" y="4">h</text>
<text x="576" y="4">o</text>
<text x="584" y="4">n</text>
<text x="600" y="4">=</text>
<text x="608" y="4">=</text>
<text x="200" y="36">Ø</text>
<text x="208" y="36">M</text>
<text x="216" y="36">Q</text>
<text x="368" y="36">I</text>
<text x="376" y="36">P</text>
<text x="384" y="36">y</text>
<text x="392" y="36">t</text>
<text x="400" y="36">h</text>
<text x="408" y="36">o</text>
<text x="416" y="36">n</text>
<text x="520" y="36">I</text>
<text x="528" y="36">n</text>
<text x="536" y="36">t</text>
<text x="544" y="36">e</text>
<text x="552" y="36">r</text>
<text x="560" y="36">a</text>
<text x="568" y="36">c</text>
<text x="576" y="36">t</text>
<text x="584" y="36">i</text>
<text x="592" y="36">v</text>
<text x="600" y="36">e</text>
<text x="368" y="52">K</text>
<text x="376" y="52">e</text>
<text x="384" y="52">r</text>
<text x="392" y="52">n</text>
<text x="400" y="52">e</text>
<text x="408" y="52">l</text>
<text x="520" y="52">S</text>
<text x="528" y="52">h</text>
<text x="536" y="52">e</text>
<text x="544" y="52">l</text>
<text x="552" y="52">l</text>
<text x="168" y="84">e</text>
<text x="176" y="84">x</text>
<text x="184" y="84">e</text>
<text x="192" y="84">c</text>
<text x="200" y="84">u</text>
<text x="208" y="84">t</text>
<text x="216" y="84">e</text>
<text x="224" y="84">_</text>
<text x="232" y="84">c</text>
<text x="240" y="84">o</text>
<text x="248" y="84">d</text>
<text x="256" y="84">e</text>
<text x="16" y="100">F</text>
<text x="24" y="100">r</text>
<text x="32" y="100">o</text>
<text x="40" y="100">n</text>
<text x="48" y="100">t</text>
<text x="56" y="100">e</text>
<text x="64" y="100">n</text>
<text x="72" y="100">d</text>
<text x="360" y="116">d</text>
<text x="368" y="116">o</text>
<text x="376" y="116">_</text>
<text x="384" y="116">e</text>
<text x="392" y="116">x</text>
<text x="400" y="116">e</text>
<text x="408" y="116">c</text>
<text x="416" y="116">u</text>
<text x="424" y="116">t</text>
<text x="432" y="116">e</text>
<text x="528" y="116">r</text>
<text x="536" y="116">u</text>
<text x="544" y="116">n</text>
<text x="552" y="116">_</text>
<text x="560" y="116">c</text>
<text x="568" y="116">e</text>
<text x="576" y="116">l</text>
<text x="584" y="116">l</text>
<text x="168" y="148">r</text>
<text x="176" y="148">e</text>
<text x="184" y="148">p</text>
<text x="192" y="148">l</text>
<text x="200" y="148">y</text>
<text x="208" y="148">_</text>
<text x="216" y="148">c</text>
<text x="224" y="148">o</text>
<text x="232" y="148">n</text>
<text x="240" y="148">t</text>
<text x="248" y="148">e</text>
<text x="256" y="148">n</text>
<text x="264" y="148">t</text>
</g>
</svg>
</div>
<p>The frontend sends the cell code as text to the kernel:</p>
<div class="code-filename"><span>ipykernel/kernelbase.py</span></div><pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">do_execute_args </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> {</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">    "code"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: code,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">    "silent"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: silent,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">    "store_history"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: store_history,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="5"><div class="code-ln-n" data-line-number="5"></div></td>
        <td class="code-ln-code" data-line-number="5"><span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">    "user_expressions"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: user_expressions,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="6"><div class="code-ln-n" data-line-number="6"></div></td>
        <td class="code-ln-code" data-line-number="6"><span class="line"><span style="color:#032F62;--shiki-dark:#9ECBFF">    "allow_stdin"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">: allow_stdin,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="7"><div class="code-ln-n" data-line-number="7"></div></td>
        <td class="code-ln-code" data-line-number="7"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">}</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="8"><div class="code-ln-n" data-line-number="8"></div></td>
        <td class="code-ln-code" data-line-number="8"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="9"><div class="code-ln-n" data-line-number="9"></div></td>
        <td class="code-ln-code" data-line-number="9"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">._do_exec_accepted_params[</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"cell_meta"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">]:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="10"><div class="code-ln-n" data-line-number="10"></div></td>
        <td class="code-ln-code" data-line-number="10"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    do_execute_args[</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"cell_meta"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">] </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> cell_meta</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="11"><div class="code-ln-n" data-line-number="11"></div></td>
        <td class="code-ln-code" data-line-number="11"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">._do_exec_accepted_params[</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"cell_id"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">]:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="12"><div class="code-ln-n" data-line-number="12"></div></td>
        <td class="code-ln-code" data-line-number="12"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    do_execute_args[</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"cell_id"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">] </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> cell_id</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="13"><div class="code-ln-n" data-line-number="13"></div></td>
        <td class="code-ln-code" data-line-number="13"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="14"><div class="code-ln-n" data-line-number="14"></div></td>
        <td class="code-ln-code" data-line-number="14"><span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D"># Call do_execute with the appropriate arguments</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="15"><div class="code-ln-n" data-line-number="15"></div></td>
        <td class="code-ln-code" data-line-number="15"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">reply_content </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.do_execute(</span><span style="color:#D73A49;--shiki-dark:#F97583">**</span><span style="color:#24292E;--shiki-dark:#E1E4E8">do_execute_args)</span></span></td>
      </tr></tbody></table></code></pre>
<p>The kernel then decides how to interpret the text of the cell and what to do with it. The IPython Kernel, as the name suggests, runs the <!-- --> interactive shell, so it <a href="https://github.com/ipython/ipykernel/blob/main/ipykernel/ipkernel.py#L339">sends the contents</a> of the cell to the shell to run it:</p>
<div class="code-filename"><span>ipkernel/ipkernel.py</span></div><pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> hasattr</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(shell, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"run_cell_async"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">and</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> hasattr</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(shell, </span><span style="color:#032F62;--shiki-dark:#9ECBFF">"should_run_async"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">):</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    run_cell </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> shell.run_cell_async</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    should_run_async </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> shell.should_run_async</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    with_cell_id </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> _accepts_parameters(run_cell, [</span><span style="color:#032F62;--shiki-dark:#9ECBFF">"cell_id"</span><span style="color:#24292E;--shiki-dark:#E1E4E8">])</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="5"><div class="code-ln-n" data-line-number="5"></div></td>
        <td class="code-ln-code" data-line-number="5"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">else</span><span style="color:#24292E;--shiki-dark:#E1E4E8">:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="6"><div class="code-ln-n" data-line-number="6"></div></td>
        <td class="code-ln-code" data-line-number="6"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    should_run_async </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> lambda</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> cell: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">False</span><span style="color:#6A737D;--shiki-dark:#6A737D">  # noqa: ARG005, E731</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="7"><div class="code-ln-n" data-line-number="7"></div></td>
        <td class="code-ln-code" data-line-number="7"><span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    # older IPython,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="8"><div class="code-ln-n" data-line-number="8"></div></td>
        <td class="code-ln-code" data-line-number="8"><span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">    # use blocking run_cell and wrap it in coroutine</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="9"><div class="code-ln-n" data-line-number="9"></div></td>
        <td class="code-ln-code" data-line-number="9"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="10"><div class="code-ln-n" data-line-number="10"></div></td>
        <td class="code-ln-code" data-line-number="10"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    async</span><span style="color:#D73A49;--shiki-dark:#F97583"> def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> run_cell</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#24292E;--shiki-dark:#E1E4E8">args, </span><span style="color:#D73A49;--shiki-dark:#F97583">**</span><span style="color:#24292E;--shiki-dark:#E1E4E8">kwargs):</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="11"><div class="code-ln-n" data-line-number="11"></div></td>
        <td class="code-ln-code" data-line-number="11"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        return</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> shell.run_cell(</span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#24292E;--shiki-dark:#E1E4E8">args, </span><span style="color:#D73A49;--shiki-dark:#F97583">**</span><span style="color:#24292E;--shiki-dark:#E1E4E8">kwargs)</span></span></td>
      </tr></tbody></table></code></pre>
<p>Finally, <!-- --> runs a separate  <a href="https://github.com/ipython/ipython/blob/main/IPython/core/interactiveshell.py#L3183">session</a>, transforming the cell&#x27;s text into an Abstract Syntax Tree (AST), compiling, and running it:</p>
<div class="code-filename"><span>IPython/core/interactiveshell.py</span></div><pre class="language-python pre-code-block shiki github-light github-dark"><code><table class="code-ln-table"><tbody><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="1"><div class="code-ln-n" data-line-number="1"></div></td>
        <td class="code-ln-code" data-line-number="1"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">async</span><span style="color:#D73A49;--shiki-dark:#F97583"> def</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> run_cell_async</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="2"><div class="code-ln-n" data-line-number="2"></div></td>
        <td class="code-ln-code" data-line-number="2"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        self,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="3"><div class="code-ln-n" data-line-number="3"></div></td>
        <td class="code-ln-code" data-line-number="3"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        raw_cell: </span><span style="color:#005CC5;--shiki-dark:#79B8FF">str</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="4"><div class="code-ln-n" data-line-number="4"></div></td>
        <td class="code-ln-code" data-line-number="4"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        store_history</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">False</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="5"><div class="code-ln-n" data-line-number="5"></div></td>
        <td class="code-ln-code" data-line-number="5"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        silent</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">False</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="6"><div class="code-ln-n" data-line-number="6"></div></td>
        <td class="code-ln-code" data-line-number="6"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        shell_futures</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">True</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="7"><div class="code-ln-n" data-line-number="7"></div></td>
        <td class="code-ln-code" data-line-number="7"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">        *</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="8"><div class="code-ln-n" data-line-number="8"></div></td>
        <td class="code-ln-code" data-line-number="8"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        transformed_cell: Optional[</span><span style="color:#005CC5;--shiki-dark:#79B8FF">str</span><span style="color:#24292E;--shiki-dark:#E1E4E8">] </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="9"><div class="code-ln-n" data-line-number="9"></div></td>
        <td class="code-ln-code" data-line-number="9"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        preprocessing_exc_tuple: Optional[AnyType] </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="10"><div class="code-ln-n" data-line-number="10"></div></td>
        <td class="code-ln-code" data-line-number="10"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">        cell_id</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF">None</span><span style="color:#24292E;--shiki-dark:#E1E4E8">,</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="11"><div class="code-ln-n" data-line-number="11"></div></td>
        <td class="code-ln-code" data-line-number="11"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    ) -> ExecutionResult:</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="12"><div class="code-ln-n" data-line-number="12"></div></td>
        <td class="code-ln-code" data-line-number="12"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">//</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> ...</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="13"><div class="code-ln-n" data-line-number="13"></div></td>
        <td class="code-ln-code" data-line-number="13"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">code_ast </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> compiler.ast_parse(cell, </span><span style="color:#E36209;--shiki-dark:#FFAB70">filename</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">cell_name)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="14"><div class="code-ln-n" data-line-number="14"></div></td>
        <td class="code-ln-code" data-line-number="14"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">//</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> ...</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="15"><div class="code-ln-n" data-line-number="15"></div></td>
        <td class="code-ln-code" data-line-number="15"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">code_ast </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.transform_ast(code_ast)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="16"><div class="code-ln-n" data-line-number="16"></div></td>
        <td class="code-ln-code" data-line-number="16"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">//</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> ...</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="17"><div class="code-ln-n" data-line-number="17"></div></td>
        <td class="code-ln-code" data-line-number="17"><span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">has_raised </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> await</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.run_ast_nodes(code_ast.body, cell_name, </span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="18"><div class="code-ln-n" data-line-number="18"></div></td>
        <td class="code-ln-code" data-line-number="18"><span class="line"><span style="color:#E36209;--shiki-dark:#FFAB70">                       interactivity</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">interactivity, </span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="19"><div class="code-ln-n" data-line-number="19"></div></td>
        <td class="code-ln-code" data-line-number="19"><span class="line"><span style="color:#E36209;--shiki-dark:#FFAB70">                       compiler</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">compiler, </span><span style="color:#E36209;--shiki-dark:#FFAB70">result</span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8">result)</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="20"><div class="code-ln-n" data-line-number="20"></div></td>
        <td class="code-ln-code" data-line-number="20"><span class="line"></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="21"><div class="code-ln-n" data-line-number="21"></div></td>
        <td class="code-ln-code" data-line-number="21"><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.last_execution_succeeded </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#D73A49;--shiki-dark:#F97583"> not</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> has_raised</span></span></td>
      </tr><tr class="code-ln-line">
        <td class="code-ln-numbers" data-line-number="22"><div class="code-ln-n" data-line-number="22"></div></td>
        <td class="code-ln-code" data-line-number="22"><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">self</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.last_execution_result </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> result</span></span></td>
      </tr></tbody></table></code></pre>
<p>As you can see, the whole thing does not look like something that can be imported as a module. The code exists only in the interactive namespace of the <!-- --> shell. Hence, in order to be able to run <!-- -->, we must take our function, store it in a separate file—preferably somewhere in a temp folder, as a temporary module that can be imported. This way we make it accessible to child processes started by <!-- -->, so when <!-- --> tries to serialize and deserialize our function, it can successfully import it by name, and everything works smoothly.</p>
<!-- --></div></div><div class="whitespace-pre font-mono"> |                                                                           |</div><div class="whitespace-pre font-mono"> |                                                                           |</div><div class="whitespace-pre font-mono" style="display:flex"> | <a class="hover:underline inline-block" style="text-decoration:none;color:inherit;width:calc(100% - 6ch)" href="/">&lt;&lt; back                                                                     </a>|</div><div class="whitespace-pre font-mono"> |                                                                           |</div><div> \__                      --&gt; <a href="http://andrzej.lichnerowicz.pl" target="_blank" rel="noopener noreferrer" title="andrzej.lichnerowicz.pl" class="link" style="cursor:pointer">andrzej.lichnerowicz.pl</a> &lt;--                  __/
   //                                                                      \\
  // ------------------------                        ---------------------- \\
 &#x27;~~~~~~~~~~~~~~~~~~~~~~~~~// ------         ------- \~~~~~~~~~~~~~~~~~~~~~~`
                          &#x27;~~~~~~~//          \~~~~~~~`
                                 // ---------- \
                                &#x27;~~~~~~~~~~~~~~~`
      </div></div></div><!--$--><!--/$--><!--$--><!--/$--><script src="/_next/static/chunks/webpack-3ec6371319e38377.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1544,[\"177\",\"static/chunks/app/layout-cb5038e2af1ab31b.js\"],\"AsciiArtLogger\"]\n3:I[2738,[\"177\",\"static/chunks/app/layout-cb5038e2af1ab31b.js\"],\"ThemeProvider\"]\n4:I[7555,[],\"\"]\n5:I[1295,[],\"\"]\n6:I[9543,[\"345\",\"static/chunks/app/not-found-374964195ecf67e5.js\"],\"default\"]\n8:I[9665,[],\"MetadataBoundary\"]\na:I[9665,[],\"OutletBoundary\"]\nd:I[4911,[],\"AsyncMetadataOutlet\"]\nf:I[9665,[],\"ViewportBoundary\"]\n11:I[6614,[],\"\"]\n:HL[\"/_next/static/css/09dfadb69bdaa005.css\",\"style\"]\n:HL[\"/_next/static/css/ac9b4cc367c17784.css\",\"style\"]\n:HL[\"/_next/static/css/72f0b751ba818b6f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"PRuMAV6fiY333i2WQTmTa\",\"p\":\"\",\"c\":[\"\",\"en\",\"blog\",\"2024\",\"notebook-multiprocessing\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"en\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2024/notebook-multiprocessing\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/09dfadb69bdaa005.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ac9b4cc367c17784.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"sizes\":\"any\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-touch-icon.png\"}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"$L3\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L6\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}]]}],{\"children\":[\"en\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"2024/notebook-multiprocessing\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/72f0b751ba818b6f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":[\"$Lb\",\"$Lc\",[\"$\",\"$Ld\",null,{\"promise\":\"$@e\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"63jkVAKhASF7_hRlPIf-9\",{\"children\":[[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"12:\"$Sreact.suspense\"\n13:I[4911,[],\"AsyncMetadata\"]\n9:[\"$\",\"$12\",null,{\"fallback\":null,\"children\":[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]}]\n"])</script><script>self.__next_f.push([1,"c:null\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"14:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Multiprocessing in Jupyter Notebooks | @unjello blog\"}],[\"$\",\"meta\",\"1\",{\"property\":\"og:title\",\"content\":\"Multiprocessing in Jupyter Notebooks | @unjello blog\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:url\",\"content\":\"https://andrzej.lichnerowicz.pl/en/blog/2024/notebook-multiprocessing/\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:image\",\"content\":\"https://andrzej.lichnerowicz.pl/images/2024/notebook_multiprocessing/index/96dz0h.jpg\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:image:alt\",\"content\":\"Multiprocessing in Jupyter Notebooks | @unjello blog\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"8\",{\"property\":\"article:published_time\",\"content\":\"2024-10-13T20:01:33+02:00\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:title\",\"content\":\"Multiprocessing in Jupyter Notebooks | @unjello blog\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:image\",\"content\":\"https://andrzej.lichnerowicz.pl/images/2024/notebook_multiprocessing/index/96dz0h.jpg\"}],[\"$\",\"link\",\"12\",{\"rel\":\"shortcut icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",\"13\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"sizes\":\"any\"}],[\"$\",\"link\",\"14\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-touch-icon.png\"}]],\"error\":null,\"digest\":\"$undefined\"}\ne:{\"metadata\":\"$14:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"15:I[8109,[\"72\",\"static/chunks/72-d3fcf2c32f7e11b9.js\",\"435\",\"static/chunks/435-711aececbe1f0279.js\",\"447\",\"static/chunks/app/en/blog/%5B%5B...slug%5D%5D/page-796c0eed0cae63f7.js\"],\"ThemeSwitcher\"]\n17:I[6874,[\"72\",\"static/chunks/72-d3fcf2c32f7e11b9.js\",\"435\",\"static/chunks/435-711aececbe1f0279.js\",\"447\",\"static/chunks/app/en/blog/%5B%5B...slug%5D%5D/page-796c0eed0cae63f7.js\"],\"\"]\n18:I[1809,[\"72\",\"static/chunks/72-d3fcf2c32f7e11b9.js\",\"435\",\"static/chunks/435-711aececbe1f0279.js\",\"447\",\"static/chunks/app/en/blog/%5B%5B...slug%5D%5D/page-796c0eed0cae63f7.js\"],\"AsciiBorderedMdx\"]\n16:T548,                              _______._ _\n                      _ _.___/       |\n                         |           |\n                         |           |\n                                                 ∙\r\n                         .                       :\r\n             ____________¡ \u003e\u003e\u003e  _______   _ __ _ ¡  __    _______\r\n          __|⌐           |  ___|  ⌐____|_ ______ |       |       |\r\n        . |     [        | |                   _ |  :  __l.|  ┌  | .\r\n     ÷¼¼¼ |     |         \\|    _____|       _ __|  |_|   |      | ¼¼¼÷\r\n          |_____l  _ l         |     |___|        ________|------!\r\n          ! ___ _         \\____| ___ !  _________|.sti      __ _ :\r\n          ∙                          :             \u003c \u003c\u003c\u003c\u003c        ∙\r\n                                     ∙\n                         :           |\n    - -----andrzej-_ ____\\_____|----_|_____________'-lichnerowicz-------- -\n                         :           |\n .     p e r s o n a l ! |    #1     | wEBPAGE                            .\n . _         - --------- |  - -- -   | ------- -                         _  .\n-:-\\-\\-------------------|- -     - -|-----------------------------------\\-\\-:\n |                      _|___________|_                                      |\n |                       :           :                                       |"])</script><script>self.__next_f.push([1,"7:[\"$\",\"div\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"ascii-art nfo-pre\",\"children\":[[\"$\",\"$L15\",null,{}],[\"$\",\"div\",null,{\"className\":\"header-component\",\"children\":\"$16\"}],\" |//_)-\u003e 2 0 2 4 . 1 0 . 1 3 \u003c--------------------------------------------(_\\\\|\\n\",[[\"$\",\"div\",null,{\"className\":\"whitespace-pre font-mono\",\"children\":\" |                                                                           |\"}],[\"$\",\"div\",null,{\"className\":\"whitespace-pre font-mono\",\"children\":\" |                                                                           |\"}],[\"$\",\"div\",null,{\"className\":\"whitespace-pre font-mono\",\"style\":{\"display\":\"flex\"},\"children\":[\" | \",[\"$\",\"$L17\",null,{\"href\":\"/\",\"className\":\"hover:underline inline-block\",\"prefetch\":false,\"style\":{\"textDecoration\":\"none\",\"color\":\"inherit\",\"width\":\"calc(100% - 6ch)\"},\"children\":\"\u003c\u003c back                                                                     \"}],\"|\"]}],[\"$\",\"div\",null,{\"className\":\"whitespace-pre font-mono\",\"children\":\" |                                                                           |\"}]],[\"$\",\"$L18\",null,{\"children\":[[\"$\",\"div\",null,{\"style\":{\"fontWeight\":\"bold\",\"fontSize\":\"1.2em\",\"marginTop\":\"1em\",\"marginBottom\":\"2.5em\"},\"children\":[\"# \",\"Multiprocessing in Jupyter Notebooks\"]}],\"$L19\"]}],\"$7:props:children:props:children:3\",[\"$\",\"div\",null,{\"children\":[\" \\\\__                      --\u003e \",[\"$\",\"a\",null,{\"href\":\"http://andrzej.lichnerowicz.pl\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"title\":\"andrzej.lichnerowicz.pl\",\"className\":\"link\",\"style\":{\"cursor\":\"pointer\"},\"children\":\"andrzej.lichnerowicz.pl\"}],\" \u003c--                  __/\\n   //                                                                      \\\\\\\\\\n  // ------------------------                        ---------------------- \\\\\\\\\\n '~~~~~~~~~~~~~~~~~~~~~~~~~// ------         ------- \\\\~~~~~~~~~~~~~~~~~~~~~~`\\n                          '~~~~~~~//          \\\\~~~~~~~`\\n                                 // ---------- \\\\\\n                                '~~~~~~~~~~~~~~~`\\n      \"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1b:I[316,[\"72\",\"static/chunks/72-d3fcf2c32f7e11b9.js\",\"435\",\"static/chunks/435-711aececbe1f0279.js\",\"447\",\"static/chunks/app/en/blog/%5B%5B...slug%5D%5D/page-796c0eed0cae63f7.js\"],\"Figure\"]\n20:I[877,[\"72\",\"static/chunks/72-d3fcf2c32f7e11b9.js\",\"435\",\"static/chunks/435-711aececbe1f0279.js\",\"447\",\"static/chunks/app/en/blog/%5B%5B...slug%5D%5D/page-796c0eed0cae63f7.js\"],\"Admonition\"]\n"])</script><script>self.__next_f.push([1,"19:[[\"$\",\"div\",null,{\"className\":\"MarkdownHeading_markdown-heading__G6B4T\",\"children\":[[\"$\",\"span\",null,{\"className\":\"MarkdownHeading_markdown-hash__CheR_\",\"children\":[\"##\",\" \"]}],[\"$\",\"span\",null,{\"children\":\"TL;DR\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"To run heavy workloads in a Jupyter Notebook, you need to take your function and store it in a temporary Python source file so it's importable as a module:\"}],\"\\n\",[\"\",\"$L1a\"],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Here's what's happening in this code:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"The wrap_fn context manager takes your function fn.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"It gets the source code of fn and writes it to a temporary Python file.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"It then imports this temporary file as a module, making your function accessible via a module name.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Inside the context, fn is now the function from the temporary module and can be pickled and sent to child processes.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"We use \",null,\" to distribute the workload across multiple processes.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"By doing this, we avoid the issue of the function not being picklable due to being defined in the interactive namespace.\"}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"MarkdownHeading_markdown-heading__G6B4T\",\"children\":[[\"$\",\"span\",null,{\"className\":\"MarkdownHeading_markdown-hash__CheR_\",\"children\":[\"##\",\" \"]}],[\"$\",\"span\",null,{\"children\":\"But if you ask me on a deeper level...\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Jupyter Notebooks offer a great way to work with many things, combining the ability to play around with data like in a REPL with the maintainability of a script. Once in a while, though, you face a problem that requires some serious raw power. For me, such a moment occurred when I was working on a data matching problem in a dataset containing almost \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mn\",null,{\"children\":\"900\"}],[\"$\",\"mo\",null,{\"separator\":\"true\",\"children\":\",\"}],[\"$\",\"mn\",null,{\"children\":\"000\"}]]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"900,000\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.8389em\",\"verticalAlign\":\"-0.1944em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"900\"}],[\"$\",\"span\",null,{\"className\":\"mpunct\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"000\"}]]}]}]]}],\" elements. Performing naive \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"A\"}],[\"$\",\"mo\",null,{\"children\":\"×\"}],[\"$\",\"mi\",null,{\"children\":\"B\"}]]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"A \\\\times B\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.7667em\",\"verticalAlign\":\"-0.0833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"children\":\"A\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}],[\"$\",\"span\",null,{\"className\":\"mbin\",\"children\":\"×\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}]]}],[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.6833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.05017em\"},\"children\":\"B\"}]]}]]}]]}],\" pair matching with similarity tests over a couple of parameters that take 1 second would have me processing the set for… about 25,684 years. A gentle reminder that:\"]}],\"\\n\",[\"$\",\"$L1b\",null,{\"src\":\"./96dz0h.jpg\",\"alt\":\"Big Oh N squared is bad, and you should feel bad -- a Zoidberg meme, very mature...\",\"caption\":\"Very mature meme\",\"attribution\":\"Original idea captioned in [memegenerator](https://imgflip.com/memegenerator/)\",\"postSlug\":\"/blog/2024/notebook_multiprocessing\"}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"MarkdownHeading_markdown-heading__G6B4T\",\"children\":[[\"$\",\"span\",null,{\"className\":\"MarkdownHeading_markdown-hash__CheR_\",\"children\":[\"##\",\" \"]}],[\"$\",\"span\",null,{\"children\":\"Multiprocessing\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"So what do you do when you have so much crunching to do that you want to utilize all CPU cores? That’s when \",[\"$\",\"a\",null,{\"href\":\"https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor\",\"children\":null}],\" steps in to save the day. For those unfamiliar, \",null,\" is like that friend who helps you move heavy furniture; it lives in the \",[\"$\",\"a\",null,{\"href\":\"https://docs.python.org/3/library/concurrent.futures.html\",\"children\":null}],\" package of the standard Python library and, much like \",[\"$\",\"a\",null,{\"href\":\"https://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor\",\"children\":null}],\", lets you distribute workload across a pool of workers. The difference is, these workers are separate processes, not threads.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"With both \",[\"$\",\"em\",null,{\"children\":\"threads\"}],\" and \",[\"$\",\"em\",null,{\"children\":\"processes\"}],\", the API looks innocently simple: you just pass the function that will be called by each worker with a piece of data:\"]}],\"\\n\",[\"\",\"$L1c\"],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"For \",[\"$\",\"em\",null,{\"children\":\"threads\"}],\", that's pretty much it—you can pat yourself on the back and watch your CPU stay underutilized. But \",[\"$\",\"a\",null,{\"href\":\"https://stackoverflow.com/questions/4496680/python-threads-all-executing-on-a-single-core\",\"children\":\"threads aren't going to use all your cores\"}],\" due to the infamous Global Interpreter Lock (GIL). So what if we swap \",null,\" for \",null,\" to really get the party started? We get an exception immediately.\"]}],\"\\n\",[\"\",\"$L1d\"],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"What happened? Well, the first rule of multiprocessing is that it uses \",[\"$\",\"a\",null,{\"href\":\"https:z//docs.python.org/3/library/pickle.html\",\"children\":null}],\" to serialize a function and data between the parent process and child processes. And pickle's \",[\"$\",\"a\",null,{\"href\":\"https://docs.python.org/3/library/pickle.html\",\"children\":\"documentation\"}],\" says:\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Note that functions (built-in and user-defined) are pickled by \",[\"$\",\"strong\",null,{\"children\":\"fully qualified name\"}],\", not by value.\\nThis means that only the function name is pickled, along with the name of the containing module and classes.\\nNeither the function's code, nor any of its function attributes are pickled.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Since all lambdas share the same name -- \",null,\" -- that explains why we need to define a proper method:\"]}],\"\\n\",[\"\",\"$L1e\"],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Now it works, but that error above has one little, less obvious consequence. If we only send a \",[\"$\",\"em\",null,{\"children\":\"fully qualified name\"}],\" over to another process, then how does the method get called?\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When the \",null,\" module starts a new child process, it doesn't have access to your current interactive namespace. It's like sending someone to fetch an item from your house without giving them the address—they need to know where to look.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Under the hood, when multiprocessing starts a new child process, it uses \",null,\" on Windows and macOS. On POSIX systems, it's still using fork, although since Python 3.12 it'll throw a \",null,\". Fork is a bit problematic from a safety point of view, as the child process inherits everything from the parent process. Spawn, on the other hand, starts a completely fresh Python interpreter process.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This means that any variables or functions you've defined interactively in your Jupyter Notebook aren't automatically available in the child processes. They're starting from scratch, and unless your function is defined in a module they can import, they're left in the dark.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Here's a rough diagram, courtesy of the Python \",[\"$\",\"a\",null,{\"href\":\"https://github.com/python/cpython/blob/main/Lib/concurrent/futures/process.py\",\"children\":\"docs\"}],\", of how the flow looks when you submit work to the process pool:\"]}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"goat-diagram-wrapper\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"height\":\"313\",\"width\":\"656\",\"fontFamily\":\"Menlo,Lucida Console,monospace\",\"viewBox\":\"0 0 656 313\",\"preserveAspectRatio\":\"xMidYMid meet\",\"children\":[\"\\n\",[\"$\",\"style\",null,{\"type\":\"text/css\",\"children\":\"\\nsvg {\\n   color: #000000;\\n}\\n@media (prefers-color-scheme: dark) {\\n   svg {\\n      color-scheme: dark; /* ask the browser for a dark background */\\n      color: #FFFFFF;\\n   }\\n}\\n\"}],\"\\n\",[\"$\",\"g\",null,{\"transform\":\"translate(8,16)\",\"children\":[\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,16 L 88,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,16 L 224,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 288,16 L 360,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,16 L 504,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 552,16 L 632,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 96,32 L 128,32\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,64 L 224,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,64 L 504,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 552,64 L 632,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 232,96 L 280,96\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 368,96 L 400,96\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 512,96 L 544,96\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,128 L 504,128\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,144 L 224,144\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,176 L 240,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,176 L 504,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 96,192 L 128,192\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 248,192 L 280,192\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 368,192 L 400,192\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 512,192 L 544,192\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,208 L 240,208\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,224 L 504,224\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,288 L 88,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,288 L 240,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 288,288 L 360,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,288 L 504,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 552,288 L 632,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,0 L 0,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,16 L 0,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 88,16 L 88,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,16 L 136,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,64 L 136,144\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,176 L 136,208\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 136,208 L 136,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 224,16 L 224,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 224,64 L 224,144\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 240,176 L 240,208\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 240,208 L 240,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 288,16 L 288,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 360,16 L 360,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,16 L 408,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,64 L 408,128\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,176 L 408,224\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 408,224 L 408,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,16 L 504,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,64 L 504,128\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,176 L 504,224\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,224 L 504,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 552,16 L 552,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 552,64 L 552,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 632,0 L 632,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 632,16 L 632,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 632,64 L 632,288\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"104.000000,192.000000 92.000000,186.399994 92.000000,197.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 96.000000, 192.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"136.000000,32.000000 124.000000,26.400000 124.000000,37.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 128.000000, 32.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"136.000000,192.000000 124.000000,186.399994 124.000000,197.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 128.000000, 192.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"256.000000,192.000000 244.000000,186.399994 244.000000,197.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 248.000000, 192.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"288.000000,96.000000 276.000000,90.400002 276.000000,101.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 280.000000, 96.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"288.000000,192.000000 276.000000,186.399994 276.000000,197.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 280.000000, 192.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"376.000000,192.000000 364.000000,186.399994 364.000000,197.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 368.000000, 192.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"408.000000,96.000000 396.000000,90.400002 396.000000,101.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 400.000000, 96.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"520.000000,192.000000 508.000000,186.399994 508.000000,197.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 512.000000, 192.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"552.000000,96.000000 540.000000,90.400002 540.000000,101.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 544.000000, 96.000000)\"}],\"\\n\",[\"$\",\"style\",null,{\"children\":\"\\n  text {\\n       text-anchor: middle;\\n       font-family: \\\"Menlo\\\",\\\"Lucida Console\\\",\\\"monospace\\\";\\n       fill: currentColor;\\n       font-size: 1em;\\n  }\\n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"8\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"16\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"24\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"32\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"40\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"48\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"56\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"64\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"72\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"80\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"88\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"96\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"104\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"112\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"120\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"128\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"136\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"144\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"184\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"4\",\"children\":\"I\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"4\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"4\",\"children\":\"-\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"224\",\"y\":\"4\",\"children\":\"p\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"232\",\"y\":\"4\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"240\",\"y\":\"4\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"248\",\"y\":\"4\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"256\",\"y\":\"4\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"264\",\"y\":\"4\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"272\",\"y\":\"4\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"288\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"296\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"304\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"312\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"320\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"328\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"336\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"344\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"352\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"360\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"368\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"376\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"384\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"392\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"400\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"408\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"416\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"4\",\"children\":\"|\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"480\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"496\",\"y\":\"4\",\"children\":\"O\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"504\",\"y\":\"4\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"512\",\"y\":\"4\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"520\",\"y\":\"4\",\"children\":\"-\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"528\",\"y\":\"4\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"536\",\"y\":\"4\",\"children\":\"f\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"544\",\"y\":\"4\",\"children\":\"-\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"552\",\"y\":\"4\",\"children\":\"p\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"560\",\"y\":\"4\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"568\",\"y\":\"4\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"4\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"4\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"592\",\"y\":\"4\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"4\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"616\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"624\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"36\",\"children\":\"W\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"36\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"36\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"36\",\"children\":\"k\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"36\",\"children\":\"I\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"36\",\"children\":\"d\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"36\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"36\",\"children\":\"C\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"36\",\"children\":\"a\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"36\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"36\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"568\",\"y\":\"36\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"36\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"36\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"592\",\"y\":\"36\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"36\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"608\",\"y\":\"36\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"616\",\"y\":\"36\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"52\",\"children\":\"Q\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"52\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"52\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"52\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"52\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"52\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"52\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"592\",\"y\":\"52\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"52\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"84\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"84\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"84\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"84\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"84\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"84\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"100\",\"children\":\"6\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"100\",\"children\":\"5\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"100\",\"children\":\",\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"100\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"100\",\"children\":\"a\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"100\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"100\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"480\",\"y\":\"100\",\"children\":\"(\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"488\",\"y\":\"100\",\"children\":\")\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"116\",\"children\":\"7\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"116\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"116\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"116\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"16\",\"y\":\"132\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"24\",\"y\":\"132\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"32\",\"y\":\"132\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"40\",\"y\":\"132\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"48\",\"y\":\"132\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"56\",\"y\":\"132\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"64\",\"y\":\"132\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"132\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"132\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"132\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"304\",\"y\":\"132\",\"children\":\"L\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"312\",\"y\":\"132\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"320\",\"y\":\"132\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"328\",\"y\":\"132\",\"children\":\"a\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"336\",\"y\":\"132\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"568\",\"y\":\"132\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"132\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"132\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"592\",\"y\":\"132\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"132\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"608\",\"y\":\"132\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"616\",\"y\":\"132\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"24\",\"y\":\"148\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"32\",\"y\":\"148\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"40\",\"y\":\"148\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"48\",\"y\":\"148\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"304\",\"y\":\"148\",\"children\":\"W\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"312\",\"y\":\"148\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"320\",\"y\":\"148\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"328\",\"y\":\"148\",\"children\":\"k\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"336\",\"y\":\"148\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"344\",\"y\":\"148\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"148\",\"children\":\"#\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"148\",\"children\":\"1\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"592\",\"y\":\"148\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"148\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"608\",\"y\":\"148\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"16\",\"y\":\"164\",\"children\":\"E\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"24\",\"y\":\"164\",\"children\":\"x\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"32\",\"y\":\"164\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"40\",\"y\":\"164\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"48\",\"y\":\"164\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"56\",\"y\":\"164\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"64\",\"y\":\"164\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"72\",\"y\":\"164\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"304\",\"y\":\"164\",\"children\":\"T\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"312\",\"y\":\"164\",\"children\":\"h\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"320\",\"y\":\"164\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"328\",\"y\":\"164\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"336\",\"y\":\"164\",\"children\":\"a\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"344\",\"y\":\"164\",\"children\":\"d\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"196\",\"children\":\"W\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"196\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"196\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"196\",\"children\":\"k\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"196\",\"children\":\"I\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"196\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"196\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"196\",\"children\":\"m\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"224\",\"y\":\"196\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"196\",\"children\":\"R\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"196\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"196\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"196\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"196\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"196\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"212\",\"children\":\"Q\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"212\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"212\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"212\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"212\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"244\",\"children\":\"6\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"244\",\"children\":\":\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"244\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"184\",\"y\":\"244\",\"children\":\"a\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"244\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"244\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"244\",\"children\":\"(\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"244\",\"children\":\")\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"244\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"244\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"244\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"260\",\"children\":\"f\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"184\",\"y\":\"260\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"260\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"260\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"260\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"260\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"260\",\"children\":\"4\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"260\",\"children\":\",\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"260\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"260\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"260\",\"children\":\"s\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"260\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"480\",\"y\":\"260\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"488\",\"y\":\"260\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"276\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"276\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"276\",\"children\":\".\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"276\",\"children\":\"3\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"276\",\"children\":\",\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"276\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"276\",\"children\":\"x\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"276\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"276\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"480\",\"y\":\"276\",\"children\":\"p\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"488\",\"y\":\"276\",\"children\":\"t\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When you call a \",null,\", it internally calls \",[\"$\",\"a\",null,{\"href\":\"https://github.com/python/cpython/blob/main/Lib/concurrent/futures/process.py#L791\",\"children\":\"submit\"}],\", which converts your function, its parameters, and the data into a structure called \",null,\" and adds it to a \",null,\". In a run-loop, it then pops those work items, and if they're not canceled, it repackages them into a structure \",null,\" and puts it on a \",null,\". The \",[\"$\",\"a\",null,{\"href\":\"https://github.com/python/cpython/blob/main/Lib/multiprocessing/queues.py#L262\",\"children\":null}],\" handles \",null,\" serialization before writing the data. It's up to pickle to get the \",[\"$\",\"em\",null,{\"children\":\"fully qualified name\"}],\" of the function being serialized, and while doing that (and also when deserializing), pickle actually tries to \",[\"$\",\"a\",null,{\"href\":\"https://github.com/python/cpython/blob/3.13/Lib/pickle.py#L1082\",\"children\":\"import the module\"}],\" a function is part of:\"]}],\"\\n\",[[\"$\",\"div\",null,{\"className\":\"code-filename\",\"children\":[\"$\",\"span\",null,{\"children\":\"Lib/pickle.py\"}]}],\"$L1f\"],\"\\n\",[\"$\",\"p\",null,{\"children\":\"That brings us to a very important requirement which is:\"}],\"\\n\",[\"$\",\"$L20\",null,{\"type\":\"important\",\"title\":\"IMPORTANT\",\"children\":[\"$\",\"p\",null,{\"children\":[\"A function that we pass to executor must be visible via \",null]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When you submit a function to \",null,\", the function and its arguments are pickled to be sent to the worker process. The pickling process relies on the function being defined at the module level with a name accessible via importing.\"]}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"MarkdownHeading_markdown-heading__G6B4T\",\"children\":[[\"$\",\"span\",null,{\"className\":\"MarkdownHeading_markdown-hash__CheR_\",\"children\":[\"##\",\" \"]}],[\"$\",\"span\",null,{\"children\":\"Enter Jupyter Notebook\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The problem is, Jupyter Notebooks, aside from being a JSON document, execute code dynamically. Let's see how it works:\"}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"goat-diagram-wrapper\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"height\":\"201\",\"width\":\"640\",\"fontFamily\":\"Menlo,Lucida Console,monospace\",\"viewBox\":\"0 0 640 201\",\"preserveAspectRatio\":\"xMidYMid meet\",\"children\":[\"\\n\",[\"$\",\"style\",null,{\"type\":\"text/css\",\"children\":\"\\nsvg {\\n   color: #000000;\\n}\\n@media (prefers-color-scheme: dark) {\\n   svg {\\n      color-scheme: dark; /* ask the browser for a dark background */\\n      color: #FFFFFF;\\n   }\\n}\\n\"}],\"\\n\",[\"$\",\"g\",null,{\"transform\":\"translate(8,16)\",\"children\":[\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,16 L 88,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,16 L 280,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 344,16 L 448,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,16 L 616,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,48 L 280,48\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 96,64 L 144,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 344,64 L 448,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,64 L 616,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 288,80 L 336,80\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 456,80 L 496,80\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,112 L 280,112\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 96,144 L 144,144\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 288,144 L 336,144\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 456,144 L 496,144\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,176 L 88,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,176 L 280,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 344,176 L 448,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,176 L 616,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,0 L 0,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 0,16 L 0,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 88,16 L 88,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,16 L 152,48\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,48 L 152,112\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 152,112 L 152,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 280,16 L 280,48\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 280,48 L 280,112\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 280,112 L 280,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 344,16 L 344,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 344,64 L 344,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 448,16 L 448,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 448,64 L 448,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,0 L 504,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,16 L 504,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 504,64 L 504,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 616,0 L 616,16\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 616,16 L 616,64\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"path\",null,{\"d\":\"M 616,64 L 616,176\",\"fill\":\"none\",\"stroke\":\"currentColor\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"104.000000,144.000000 92.000000,138.399994 92.000000,149.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 96.000000, 144.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"152.000000,64.000000 140.000000,58.400002 140.000000,69.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 144.000000, 64.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"296.000000,144.000000 284.000000,138.399994 284.000000,149.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 288.000000, 144.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"344.000000,80.000000 332.000000,74.400002 332.000000,85.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 336.000000, 80.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"464.000000,144.000000 452.000000,138.399994 452.000000,149.600006\",\"fill\":\"currentColor\",\"transform\":\"rotate(180.000000, 456.000000, 144.000000)\"}],\"\\n\",[\"$\",\"polygon\",null,{\"points\":\"504.000000,80.000000 492.000000,74.400002 492.000000,85.599998\",\"fill\":\"currentColor\",\"transform\":\"rotate(0.000000, 496.000000, 80.000000)\"}],\"\\n\",[\"$\",\"style\",null,{\"children\":\"\\n  text {\\n       text-anchor: middle;\\n       font-family: \\\"Menlo\\\",\\\"Lucida Console\\\",\\\"monospace\\\";\\n       fill: currentColor;\\n       font-size: 1em;\\n  }\\n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"8\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"16\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"24\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"32\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"40\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"48\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"56\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"64\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"72\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"80\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"88\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"96\",\"y\":\"4\",\"children\":\"J\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"104\",\"y\":\"4\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"112\",\"y\":\"4\",\"children\":\"p\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"120\",\"y\":\"4\",\"children\":\"y\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"128\",\"y\":\"4\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"136\",\"y\":\"4\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"144\",\"y\":\"4\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"152\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"160\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"184\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"4\",\"children\":\"|\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"224\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"232\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"240\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"248\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"256\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"264\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"272\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"288\",\"y\":\"4\",\"children\":\"K\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"296\",\"y\":\"4\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"304\",\"y\":\"4\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"312\",\"y\":\"4\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"320\",\"y\":\"4\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"328\",\"y\":\"4\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"344\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"352\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"360\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"368\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"376\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"384\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"392\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"400\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"408\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"416\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"440\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"448\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"456\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"464\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"472\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"480\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"488\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"496\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"512\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"520\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"536\",\"y\":\"4\",\"children\":\"I\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"544\",\"y\":\"4\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"552\",\"y\":\"4\",\"children\":\"y\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"560\",\"y\":\"4\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"568\",\"y\":\"4\",\"children\":\"h\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"4\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"4\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"608\",\"y\":\"4\",\"children\":\"=\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"36\",\"children\":\"Ø\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"36\",\"children\":\"M\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"36\",\"children\":\"Q\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"368\",\"y\":\"36\",\"children\":\"I\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"376\",\"y\":\"36\",\"children\":\"P\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"384\",\"y\":\"36\",\"children\":\"y\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"392\",\"y\":\"36\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"400\",\"y\":\"36\",\"children\":\"h\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"408\",\"y\":\"36\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"416\",\"y\":\"36\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"520\",\"y\":\"36\",\"children\":\"I\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"528\",\"y\":\"36\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"536\",\"y\":\"36\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"544\",\"y\":\"36\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"552\",\"y\":\"36\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"560\",\"y\":\"36\",\"children\":\"a\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"568\",\"y\":\"36\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"36\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"36\",\"children\":\"i\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"592\",\"y\":\"36\",\"children\":\"v\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"600\",\"y\":\"36\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"368\",\"y\":\"52\",\"children\":\"K\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"376\",\"y\":\"52\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"384\",\"y\":\"52\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"392\",\"y\":\"52\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"400\",\"y\":\"52\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"408\",\"y\":\"52\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"520\",\"y\":\"52\",\"children\":\"S\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"528\",\"y\":\"52\",\"children\":\"h\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"536\",\"y\":\"52\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"544\",\"y\":\"52\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"552\",\"y\":\"52\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"84\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"84\",\"children\":\"x\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"184\",\"y\":\"84\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"84\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"84\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"84\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"84\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"224\",\"y\":\"84\",\"children\":\"_\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"232\",\"y\":\"84\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"240\",\"y\":\"84\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"248\",\"y\":\"84\",\"children\":\"d\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"256\",\"y\":\"84\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"16\",\"y\":\"100\",\"children\":\"F\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"24\",\"y\":\"100\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"32\",\"y\":\"100\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"40\",\"y\":\"100\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"48\",\"y\":\"100\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"56\",\"y\":\"100\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"64\",\"y\":\"100\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"72\",\"y\":\"100\",\"children\":\"d\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"360\",\"y\":\"116\",\"children\":\"d\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"368\",\"y\":\"116\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"376\",\"y\":\"116\",\"children\":\"_\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"384\",\"y\":\"116\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"392\",\"y\":\"116\",\"children\":\"x\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"400\",\"y\":\"116\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"408\",\"y\":\"116\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"416\",\"y\":\"116\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"424\",\"y\":\"116\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"432\",\"y\":\"116\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"528\",\"y\":\"116\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"536\",\"y\":\"116\",\"children\":\"u\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"544\",\"y\":\"116\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"552\",\"y\":\"116\",\"children\":\"_\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"560\",\"y\":\"116\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"568\",\"y\":\"116\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"576\",\"y\":\"116\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"584\",\"y\":\"116\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"168\",\"y\":\"148\",\"children\":\"r\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"176\",\"y\":\"148\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"184\",\"y\":\"148\",\"children\":\"p\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"192\",\"y\":\"148\",\"children\":\"l\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"200\",\"y\":\"148\",\"children\":\"y\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"208\",\"y\":\"148\",\"children\":\"_\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"216\",\"y\":\"148\",\"children\":\"c\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"224\",\"y\":\"148\",\"children\":\"o\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"232\",\"y\":\"148\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"240\",\"y\":\"148\",\"children\":\"t\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"248\",\"y\":\"148\",\"children\":\"e\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"256\",\"y\":\"148\",\"children\":\"n\"}],\"\\n\",[\"$\",\"text\",null,{\"x\":\"264\",\"y\":\"148\",\"children\":\"t\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The frontend sends the cell code as text to the kernel:\"}],\"\\n\",[[\"$\",\"div\",null,{\"className\":\"code-filename\",\"children\":[\"$\",\"span\",null,{\"children\":\"ipykernel/kernelbase.py\"}]}],\"$L21\"],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The kernel then decides how to interpret the text of the cell and what to do with it. The IPython Kernel, as the name suggests, runs the \",null,\" interactive shell, so it \",[\"$\",\"a\",null,{\"href\":\"https://github.com/ipython/ipykernel/blob/main/ipykernel/ipkernel.py#L339\",\"children\":\"sends the contents\"}],\" of the cell to the shell to run it:\"]}],\"\\n\",[[\"$\",\"div\",null,{\"className\":\"code-filename\",\"children\":[\"$\",\"span\",null,{\"children\":\"ipkernel/ipkernel.py\"}]}],\"$L22\"],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Finally, \",null,\" runs a separate  \",[\"$\",\"a\",null,{\"href\":\"https://github.com/ipython/ipython/blob/main/IPython/core/interactiveshell.py#L3183\",\"children\":\"session\"}],\", transforming the cell's text into an Abstract Syntax Tree (AST), compiling, and running it:\"]}],\"\\n\",[[\"$\",\"div\",null,{\"className\":\"code-filename\",\"children\":[\"$\",\"span\",null,{\"children\":\"IPython/core/interactiveshell.py\"}]}],\"$L23\"],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As you can see, the whole thing does not look like something that can be imported as a module. The code exists only in the interactive namespace of the \",null,\" shell. Hence, in order to be able to run \",null,\", we must take our function, store it in a separate file—preferably somewhere in a temp folder, as a temporary module that can be imported. This way we make it accessible to child processes started by \",null,\", so when \",null,\" tries to serialize and deserialize our function, it can successfully import it by name, and everything works smoothly.\"]}],\"\\n\",[\"\",\"$L24\"]]\n"])</script><script>self.__next_f.push([1,"24:null\n25:T38fd,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e contextlib\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e inspect\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e importlib\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e pathlib\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"5\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"5\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"5\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e sys\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"6\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"6\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"6\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e tempfile\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"7\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"7\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"7\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"8\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"8\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"8\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"9\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"9\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"9\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"\u003e@contextlib.contextmanager\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"10\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"10\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"10\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003edef\u003c/span\u003e\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"\u003e wrap_fn\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(fn):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"11\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"11\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"11\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    importlib.invalidate_caches()\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"12\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"12\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"12\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    source \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e inspect.getsource(fn)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"13\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"13\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"13\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e    with\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e tempfile.NamedTemporaryFile(\u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003esuffix\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\".py\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003emode\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"w\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003eencoding\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"utf-8\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e f:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"14\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"14\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"14\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        f.write(source)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"15\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"15\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"15\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        f.flush()\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"16\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"16\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"16\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        path \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e pathlib.Path(f.name)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"17\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"17\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"17\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        directory \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e str\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(path.parent)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"18\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"18\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"18\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        sys.path.append(directory)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"19\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"19\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"19\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        module \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e importlib.import_module(\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003estr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(path.stem))\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"20\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"20\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"20\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e        yield\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e getattr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(module, func.\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e__name__\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"21\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"21\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"21\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        sys.path.remove(directory)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"22\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"22\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"22\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"23\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"23\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"23\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"24\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"24\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"24\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003edef\u003c/span\u003e\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"\u003e square\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(x):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"25\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"25\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"25\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e x\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"26\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"26\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"26\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"27\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"27\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"27\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"28\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"28\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"28\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003econtext \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e multiprocessing.get_context(\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"spawn\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"29\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"29\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"29\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e ProcessPoolExecutor(\u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003emax_workers\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e12\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003emp_context\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003econtext) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e executor, wrap_fn(square) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e fn:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"30\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"30\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"30\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e    for\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e sq \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e executor.map(fn, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003erange\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e))\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"31\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"31\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"31\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e        print\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003esq\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"32\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"32\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"32\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eprint\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"1a:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$25\"}}]}]\n26:T989,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e concurrent.futures\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e concurrent.futures.ThreadsPoolExecutor(\u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003emax_workers\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e20\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e executor:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    squares \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e executor.map(\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003elambda\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e x: x\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ex, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003erange\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e100000\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"1c:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$26\"}}]}]\n1d:[\"$\",\"pre\",null,{\"className\":\"language-plaintext pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ctable class=\\\"code-ln-table\\\"\u003e\u003ctbody\u003e\u003ctr class=\\\"code-ln-line\\\"\u003e\\n        \u003ctd class=\\\"code-ln-numbers\\\" data-line-number=\\\"1\\\"\u003e\u003cdiv class=\\\"code-ln-n\\\" data-line-number=\\\"1\\\"\u003e\u003c/div\u003e\u003c/td\u003e\\n        \u003ctd class=\\\"code-ln-code\\\" data-line-number=\\\"1\\\"\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan\u003e_pickle.PicklingError: Can't pickle \u0026#x3C;function \u0026#x3C;lambda\u003e at 0x10332e160\u003e: \u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\\n      \u003c/tr\u003e\u003ctr class=\\\"code-ln-line\\\"\u003e\\n        \u003ctd class=\\\"code-ln-numbers\\\" data-line-number=\\\"2\\\"\u003e\u003cdiv class=\\\"code-ln-n\\\" data-line-number=\\\"2\\\"\u003e\u003c/div\u003e\u003c/td\u003e\\n        \u003ctd class=\\\"code-ln-code\\\" data-line-number=\\\"2\\\"\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan\u003e  attribute lookup \u0026#x3C;lambda\u003e on __main__ failed\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\"}}]}]\n27:Td0a,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e concurrent.futures\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003edef\u003c/span\u003e\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"\u003e square\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(x):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e x\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"5\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"5\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"5\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"6\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"6\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"6\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e concurrent.futures.ThreadsPoolExecutor(\u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003emax_workers\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e20\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eas\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e executor:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"7\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"7\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"7\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    squares \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e executor.map(square, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003erange\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e100000\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$27\"}}]}]\n28:T1bf4,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e name \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e None\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    name \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e getattr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(obj, \u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e'__qualname__'\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eNone\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e name \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e None\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    name \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e obj.\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e__name__\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"5\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"5\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"5\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"6\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"6\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"6\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003emodule_name \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e whichmodule(obj, name)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"7\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"7\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"7\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003etry\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"8\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"8\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"8\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e    __import__\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(module_name, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003elevel\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"9\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"9\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"9\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    module \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e sys.modules[module_name]\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"10\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"10\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"10\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    obj2, parent \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e _getattribute(module, name)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"11\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"11\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"11\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eexcept\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eImportError\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eKeyError\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eAttributeError\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"12\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"12\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"12\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e    raise\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e PicklingError(\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"13\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"13\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"13\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e        \"Can't pickle \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e%r\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e: it's not found as \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e%s\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e%s\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e %\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"14\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"14\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"14\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        (obj, module_name, name)) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e None\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"1f:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$28\"}}]}]\n29:T18c7,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003edo_execute_args \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e {\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e    \"code\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e: code,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e    \"silent\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e: silent,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e    \"store_history\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e: store_history,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"5\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"5\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"5\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e    \"user_expressions\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e: user_expressions,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"6\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"6\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"6\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e    \"allow_stdin\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e: allow_stdin,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"7\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"7\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"7\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"8\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"8\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"8\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"9\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"9\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"9\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e self\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e._do_exec_accepted_params[\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"cell_meta\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e]:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"10\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"10\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"10\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    do_execute_args[\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"cell_meta\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e cell_meta\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"11\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"11\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"11\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e self\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e._do_exec_accepted_params[\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"cell_id\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e]:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"12\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"12\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"12\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    do_execute_args[\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"cell_id\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e cell_id\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"13\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"13\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"13\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"14\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"14\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"14\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"\u003e# Call do_execute with the appropriate arguments\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"15\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"15\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"15\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ereply_content \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e self\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e.do_execute(\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e**\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003edo_execute_args)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"21:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$29\"}}]}]\n2a:T15f0,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e hasattr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(shell, \u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"run_cell_async\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e hasattr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(shell, \u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"should_run_async\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    run_cell \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e shell.run_cell_async\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    should_run_async \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e shell.should_run_async\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    with_cell_id \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e _accepts_parameters(run_cell, [\u003c/span\u003e\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"\u003e\"cell_id\"\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e])\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"5\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"5\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"5\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003eelse\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"6\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"6\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"6\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    should_run_async \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e lambda\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e cell: \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eFalse\u003c/span\u003e\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"\u003e  # noqa: ARG005, E731\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"7\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"7\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"7\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"\u003e    # older IPython,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"8\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"8\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"8\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"\u003e    # use blocking run_cell and wrap it in coroutine\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"9\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"9\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"9\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"10\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"10\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"10\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e    async\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e def\u003c/span\u003e\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"\u003e run_cell\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003eargs, \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e**\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ekwargs):\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"11\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"11\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"11\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e shell.run_cell(\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003eargs, \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e**\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ekwargs)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"22:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2a\"}}]}]\n2b:T27d9,"])</script><script>self.__next_f.push([1,"\u003ctable class=\"code-ln-table\"\u003e\u003ctbody\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"1\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"1\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"1\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003easync\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e def\u003c/span\u003e\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"\u003e run_cell_async\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e(\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"2\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"2\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"2\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        self,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"3\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"3\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"3\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        raw_cell: \u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003estr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"4\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"4\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"4\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        store_history\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eFalse\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"5\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"5\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"5\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        silent\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eFalse\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"6\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"6\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"6\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        shell_futures\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eTrue\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"7\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"7\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"7\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e        *\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"8\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"8\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"8\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        transformed_cell: Optional[\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003estr\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e] \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e None\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"9\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"9\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"9\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        preprocessing_exc_tuple: Optional[AnyType] \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e None\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"10\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"10\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"10\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e        cell_id\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eNone\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"11\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"11\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"11\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e    ) -\u003e ExecutionResult:\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"12\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"12\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"12\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e//\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e ...\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"13\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"13\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"13\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ecode_ast \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e compiler.ast_parse(cell, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ecell_name)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"14\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"14\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"14\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e//\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e ...\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"15\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"15\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"15\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ecode_ast \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e self\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e.transform_ast(code_ast)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"16\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"16\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"16\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e//\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e ...\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"17\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"17\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"17\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ehas_raised \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e await\u003c/span\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003e self\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e.run_ast_nodes(code_ast.body, cell_name, \u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"18\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"18\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"18\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003e                       interactivity\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003einteractivity, \u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"19\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"19\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"19\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003e                       compiler\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003ecompiler, \u003c/span\u003e\u003cspan style=\"color:#E36209;--shiki-dark:#FFAB70\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003eresult)\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"20\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"20\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"20\"\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"21\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"21\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"21\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eself\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e.last_execution_succeeded \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e not\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e has_raised\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003ctr class=\"code-ln-line\"\u003e\n        \u003ctd class=\"code-ln-numbers\" data-line-number=\"22\"\u003e\u003cdiv class=\"code-ln-n\" data-line-number=\"22\"\u003e\u003c/div\u003e\u003c/td\u003e\n        \u003ctd class=\"code-ln-code\" data-line-number=\"22\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"\u003eself\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e.last_execution_result \u003c/span\u003e\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\"\u003e result\u003c/span\u003e\u003c/span\u003e\u003c/td\u003e\n      \u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e"])</script><script>self.__next_f.push([1,"23:[\"$\",\"pre\",null,{\"className\":\"language-python pre-code-block shiki github-light github-dark\",\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2b\"}}]}]\n"])</script></body></html>